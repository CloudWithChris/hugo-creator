{{ $content := .content }}
{{ $width := .width }}
{{ $image := $content.Resources.GetMatch $content.Params.Image }}
{{ $url := cond (isset $content.Params "externallink") $content.Params.ExternalLink .Permalink}}

{{ if $image }}
  {{ $tiny := ($image.Resize "480x webp") }}
  {{ $small := ($image.Resize "768x webp") }}
  {{ $medium := ($image.Resize "1024x webp") }}
  {{ $large := ($image.Resize "1366x webp") }}
  <a href="{{ $url | relURL }}">
    <img class="rounded-circle z-depth-2 person-image"
          width="{{ $width }}"
          srcset="
              {{- with $tiny.RelPermalink -}}{{.}} 480w{{- end -}}
              {{- with $small.RelPermalink -}}, {{.}} 768w{{- end -}}
              {{- with $medium.RelPermalink -}}, {{.}} 1024w{{- end -}}
              {{- with $large.RelPermalink -}}, {{.}} 1366w{{- end -}}" 
          src="{{ $image.RelPermalink }}"
          sizes="(max-width: 600px) 480px,
                 ((max-width: 800px) 768w,
                 ((max-width: 1050px) 1024w,
                 1366px"
          alt="{{ $content.Title }}" 
          title="{{ $content.Title }}" />
  </a>
{{ else }}
  {{ $image := resources.GetMatch ($content.Site.Params.content.site.ogimage | relURL) }}
  {{ $tiny := ($image.Resize "480x webp") }}
  {{ $small := ($image.Resize "768x webp") }}
  {{ $medium := ($image.Resize "1024x webp") }}
  {{ $large := ($image.Resize "1366x webp") }}
  <a href="{{ $url | relURL }}">
    <img class="rounded-circle z-depth-2 person-image"
          width="{{ $width }}"
          srcset="
              {{- with $tiny.RelPermalink -}}{{.}} 480w{{- end -}}
              {{- with $small.RelPermalink -}}, {{.}} 768w{{- end -}}
              {{- with $medium.RelPermalink -}}, {{.}} 1024w{{- end -}}
              {{- with $large.RelPermalink -}}, {{.}} 1366w{{- end -}}" 
          src="{{ $image.RelPermalink }}" 
          sizes="(max-width: 600px) 480px,
                 ((max-width: 800px) 768w,
                 ((max-width: 1050px) 1024w,
                 1366px"
          alt="{{ $content.Title }}" 
          title="{{ $content.Title }}" />
  </a>
{{ end }}